<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enrollment Data Analysis Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="../asset/js/enrollment-charts.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #1f2328;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #7a0019;
            border-bottom: 4px solid #f3b233;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h2 {
            color: #540013;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        h3 {
            color: #7a0019;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        table {
            margin: 15px 0;
            width: 100%;
        }
        th {
            background-color: #7a0019;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #e5e7eb;
        }
        tr:hover {
            background-color: #faf5ef;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .summary-item {
            background: linear-gradient(135deg, #7a0019 0%, #540013 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .summary-item strong {
            display: block;
            font-size: 32px;
            margin-bottom: 8px;
            color: #f3b233;
        }
        .info-box {
            background-color: #faf5ef;
            border-left: 5px solid #f3b233;
            padding: 20px;
            margin: 25px 0;
            border-radius: 4px;
        }
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        .chart-wrapper {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .chart-wrapper canvas {
            max-width: 100%;
            height: auto !important;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .data-table th {
            background-color: #7a0019;
            color: white;
            padding: 12px;
            text-align: left;
        }
        .data-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e5e7eb;
        }
        .data-table tr:hover {
            background-color: #faf5ef;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Enrollment Data Analysis Report</h1>
        <p><strong>Generated:</strong> 2025-12-10 11:41:34</p>
        <p><strong>Source File:</strong> pupdataset3.csv</p>
        
        <div class="summary">
            <div class="summary-item">
                <strong>13</strong>
                <span>Total Courses</span>
            </div>
            <div class="summary-item">
                <strong>4322</strong>
                <span>Total Enrollment</span>
            </div>
            <div class="summary-item">
                <strong>1706</strong>
                <span>Male Students</span>
            </div>
            <div class="summary-item">
                <strong>2616</strong>
                <span>Female Students</span>
            </div>
        </div>
        
        <div class="info-box">
            <strong>Report Overview:</strong> This report contains interactive charts generated using Chart.js 
            and statistical summaries based on the enrollment CSV data uploaded.
        </div>
        
        <h3>Top 5 Courses by Enrollment</h3><table border='1' cellpadding='8' cellspacing='0' style='border-collapse: collapse; width: 100%; margin-bottom: 20px;'><tr><th>Rank</th><th>Course</th><th>Total Enrollment</th></tr><tr><td>1</td><td><strong>Overall Total</strong></td><td>2161</td></tr><tr><td>2</td><td><strong>BSBAHRM-BN</strong></td><td>412</td></tr><tr><td>3</td><td><strong>BSIT-BN</strong></td><td>316</td></tr><tr><td>4</td><td><strong>BSIEBN</strong></td><td>213</td></tr><tr><td>5</td><td><strong>BSCPE-BN</strong></td><td>205</td></tr></table>
        
        <h3>Enrollment by Year Level</h3><table border='1' cellpadding='8' cellspacing='0' style='border-collapse: collapse; width: 100%; margin-bottom: 20px;'><tr><th>Year Level</th><th>Total Enrollment</th></tr><tr><td><strong>Y1</strong></td><td>1366</td></tr><tr><td><strong>Y2</strong></td><td>964</td></tr><tr><td><strong>Y3</strong></td><td>1066</td></tr><tr><td><strong>Y4</strong></td><td>926</td></tr><tr><td><strong>Y5</strong></td><td>0</td></tr></table>
        
        <h3>Interactive Charts</h3>
        <div class="charts-container">
            <div class="chart-wrapper">
                <h4 style="color: #7a0019; margin-bottom: 15px;">Total Enrollment by Course</h4>
                <canvas id="chartEnrollmentByCourse"></canvas>
            </div>
            
            <div class="chart-wrapper">
                <h4 style="color: #7a0019; margin-bottom: 15px;">Year-wise Enrollment Breakdown</h4>
                <canvas id="chartYearBreakdown"></canvas>
            </div>
            
            <div class="chart-wrapper">
                <h4 style="color: #7a0019; margin-bottom: 15px;">Overall Gender Distribution</h4>
                <canvas id="chartGenderDistribution"></canvas>
            </div>
            
            <div class="chart-wrapper">
                <h4 style="color: #7a0019; margin-bottom: 15px;">Gender Comparison by Course</h4>
                <canvas id="chartGenderByCourse"></canvas>
            </div>
            
            <div class="chart-wrapper">
                <h4 style="color: #7a0019; margin-bottom: 15px;">Total Enrollment by Year Level</h4>
                <canvas id="chartEnrollmentByYear"></canvas>
            </div>
            
            <div class="chart-wrapper">
                <h4 style="color: #7a0019; margin-bottom: 15px;">Top 10 Courses by Enrollment</h4>
                <canvas id="chartTopCourses"></canvas>
            </div>
        </div>
        
        <h3>Complete Enrollment Data</h3>
        <table class="data-table">
            <thead>
                <tr><th>Course</th><th>Y1 Total</th><th>Y2 Total</th><th>Y3 Total</th><th>Y4 Total</th><th>Y5 Total</th><th>Total Male</th><th>Total Female</th><th>Total All</th></tr></thead><tbody><tr><td>BSIT-BN</td><td>129.0</td><td>60.0</td><td>60.0</td><td>67.0</td><td>0.0</td><td>187.0</td><td>129.0</td><td>316.0</td></tr><tr><td>BSA-BN</td><td>0.0</td><td>0.0</td><td>45.0</td><td>29.0</td><td>0.0</td><td>11.0</td><td>63.0</td><td>74.0</td></tr><tr><td>BSIEBN</td><td>60.0</td><td>48.0</td><td>50.0</td><td>55.0</td><td>0.0</td><td>112.0</td><td>101.0</td><td>213.0</td></tr><tr><td>BSCOEBN</td><td>0.0</td><td>0.0</td><td>1.0</td><td>45.0</td><td>0.0</td><td>26.0</td><td>20.0</td><td>46.0</td></tr><tr><td>BSEDENBN</td><td>47.0</td><td>47.0</td><td>49.0</td><td>47.0</td><td>0.0</td><td>41.0</td><td>149.0</td><td>190.0</td></tr><tr><td>BSBAHRM-BN</td><td>106.0</td><td>88.0</td><td>104.0</td><td>114.0</td><td>0.0</td><td>95.0</td><td>317.0</td><td>412.0</td></tr><tr><td>BEED-BN</td><td>30.0</td><td>42.0</td><td>48.0</td><td>56.0</td><td>0.0</td><td>33.0</td><td>143.0</td><td>176.0</td></tr><tr><td>BSEDSS-BN</td><td>50.0</td><td>42.0</td><td>37.0</td><td>44.0</td><td>0.0</td><td>60.0</td><td>113.0</td><td>173.0</td></tr><tr><td>BSPSY-BN</td><td>104.0</td><td>53.0</td><td>32.0</td><td>0.0</td><td>0.0</td><td>39.0</td><td>150.0</td><td>189.0</td></tr><tr><td>DIT-BN</td><td>38.0</td><td>29.0</td><td>26.0</td><td>0.0</td><td>0.0</td><td>70.0</td><td>23.0</td><td>93.0</td></tr><tr><td>BSCPE-BN</td><td>86.0</td><td>55.0</td><td>58.0</td><td>6.0</td><td>0.0</td><td>127.0</td><td>78.0</td><td>205.0</td></tr><tr><td>DCPET-BN</td><td>33.0</td><td>18.0</td><td>23.0</td><td>0.0</td><td>0.0</td><td>52.0</td><td>22.0</td><td>74.0</td></tr><tr><td>Overall Total</td><td>683.0</td><td>482.0</td><td>533.0</td><td>463.0</td><td>0.0</td><td>853.0</td><td>1308.0</td><td>2161.0</td></tr>                </tbody>
        </table>
        
        <div style="margin-top: 50px; padding-top: 25px; border-top: 3px solid #e5e7eb; color: #6b7280; font-size: 12px; text-align: center;">
            <p>Report generated by PUP Biñan Campus Admin - CSV Analytics System</p>
            <p>Polytechnic University of the Philippines - Biñan Campus</p>
        </div>
    </div>
    
    <script>
        // Set API URL for reports - calculate based on current location
        // Report is in reports/ subdirectory, need to go up one level to reach root
        const currentPath = window.location.pathname;
        
        // Extract the base path (everything before /reports/)
        let apiUrl;
        if (currentPath.includes('/reports/')) {
            // Get the base path before /reports/
            const basePath = currentPath.substring(0, currentPath.indexOf('/reports/'));
            apiUrl = basePath + '/api/csv_data.php';
        } else {
            // Fallback: go up one level
            apiUrl = '../api/csv_data.php';
        }
        
        window.CSV_API_URL = apiUrl;
        console.log('Current pathname:', currentPath);
        console.log('Report API URL set to:', window.CSV_API_URL);
        
        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initEnrollmentCharts === 'function') {
                initEnrollmentCharts(25, window.CSV_API_URL);
            } else {
                console.error('initEnrollmentCharts function not found');
            }
        });
    </script>
</body>
</html>